import { useState } from "react";
import { Slider } from "@/components/ui/slider";
import { Button } from "@/components/ui/button";

const crosshairPresets = [
  {
    name: "TXl3uW1",
    url: "https://cdn.discordapp.com/attachments/1381854246470680587/1381942898404364298/TXl3uW1.png"
  },
  {
    name: "eZk93jG",
    url: "https://media.discordapp.net/attachments/1381854246470680587/1381942898907418704/eZk93jG.png"
  },
  {
    name: "new_cross",
    url: "https://media.discordapp.net/attachments/1381854246470680587/1381943061268926597/new_cross.png"
  }
];

export default function CrosshairCustomizer() {
  const [color, setColor] = useState("#00FF00");
  const [size, setSize] = useState(40);
  const [thickness, setThickness] = useState(2);
  const [gap, setGap] = useState(10);
  const [monitor, setMonitor] = useState(1);
  const [selectedImage, setSelectedImage] = useState<string | null>(null);
  const [customImageUrl, setCustomImageUrl] = useState("");

  const crosshairStyle = {
    position: "absolute",
    top: "50%",
    left: "50%",
    transform: "translate(-50%, -50%)",
    width: `${size}px`,
    height: `${size}px`,
    pointerEvents: "none",
  };

  const lineStyle = {
    backgroundColor: color,
    position: "absolute",
  };

  const horizontal = {
    ...lineStyle,
    top: "50%",
    left: 0,
    height: `${thickness}px`,
    width: `calc(100% - ${gap * 2}px)`,
    transform: `translateY(-50%)`,
  };

  const vertical = {
    ...lineStyle,
    left: "50%",
    top: 0,
    width: `${thickness}px`,
    height: `calc(100% - ${gap * 2}px)`,
    transform: `translateX(-50%)`,
  };

  const activeImage = selectedImage === "custom" ? customImageUrl : selectedImage;

  return (
    <div className="relative h-screen bg-black text-white">
      <div
        className="pointer-events-none"
        style={{ ...crosshairStyle }}>
        {activeImage ? (
          <img src={activeImage} alt="Crosshair" className="w-full h-full object-contain" />
        ) : (
          <>
            <div style={horizontal}></div>
            <div style={vertical}></div>
          </>
        )}
      </div>

      <div className="absolute bottom-4 left-4 bg-gray-800 p-4 rounded-xl space-y-3 max-w-sm">
        <div>
          <label>Crosshair Preset</label>
          <select
            className="text-black w-full rounded px-2 py-1"
            onChange={(e) => setSelectedImage(e.target.value)}
            value={selectedImage || ""}
          >
            <option value="">Custom (color/lines)</option>
            {crosshairPresets.map((preset) => (
              <option key={preset.url} value={preset.url}>
                {preset.name}
              </option>
            ))}
            <option value="custom">Your Own Link</option>
          </select>
        </div>

        {selectedImage === "custom" && (
          <div>
            <label>Custom Image URL</label>
            <input
              type="text"
              className="text-black w-full px-2 py-1 rounded"
              placeholder="Paste image link"
              value={customImageUrl}
              onChange={(e) => setCustomImageUrl(e.target.value)}
            />
          </div>
        )}

        {!activeImage && (
          <>
            <div>
              <label>Color</label>
              <input
                type="color"
                value={color}
                onChange={(e) => setColor(e.target.value)}
              />
            </div>
            <div>
              <label>Size</label>
              <Slider
                min={20}
                max={100}
                value={[size]}
                onValueChange={(val) => setSize(val[0])}
              />
            </div>
            <div>
              <label>Gap</label>
              <Slider
                min={0}
                max={40}
                value={[gap]}
                onValueChange={(val) => setGap(val[0])}
              />
            </div>
            <div>
              <label>Thickness</label>
              <Slider
                min={1}
                max={10}
                value={[thickness]}
                onValueChange={(val) => setThickness(val[0])}
              />
            </div>
          </>
        )}

        <div>
          <label>Monitor</label>
          <select
            className="text-black w-full rounded px-2 py-1"
            value={monitor}
            onChange={(e) => setMonitor(Number(e.target.value))}>
            <option value={1}>Monitor 1</option>
            <option value={2}>Monitor 2</option>
            <option value={3}>Monitor 3</option>
          </select>
        </div>

        <Button
          onClick={() => {
            alert("Crosshair applied!");
          }}>
          Apply Crosshair
        </Button>
      </div>
    </div>
  );
}
